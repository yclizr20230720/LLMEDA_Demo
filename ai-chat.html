<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant | VSMC-DAP</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/ai-chat.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <h1>VSMC-DAP</h1>
                <span class="subtitle">AI Assistant</span>
            </div>
            <nav class="nav">
                <a href="index.html" class="nav-link">Dashboard</a>
                <a href="#" class="nav-link active">AI Assistant</a>
                <a href="root-cause.html" class="nav-link">Root Cause Analysis</a>
                <a href="data-lineage.html" class="nav-link">Data Lineage</a>
                <a href="simulation.html" class="nav-link">What-If Simulation</a>
            </nav>
            <div class="user-info">
                <span class="user-name">Engineer Chen</span>
                <div class="status-indicator online"></div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="chat-main">
        <!-- Chat Container -->
        <div class="chat-container">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="ai-avatar">
                    <div class="avatar-icon">🤖</div>
                    <div class="ai-status">
                        <div class="ai-name">Manus AI</div>
                        <div class="ai-description">Semiconductor Manufacturing Intelligence</div>
                    </div>
                </div>
                <div class="chat-controls">
                    <button class="control-btn" onclick="clearChat()">Clear Chat</button>
                    <button class="control-btn" onclick="exportChat()">Export</button>
                </div>
            </div>

            <!-- Chat Messages -->
            <div class="chat-messages" id="chatMessages">
                <!-- Welcome Message -->
                <div class="message ai-message">
                    <div class="message-avatar">🤖</div>
                    <div class="message-content">
                        <div class="message-text">
                            <p>Hello! I'm Manus AI, your intelligent assistant for semiconductor manufacturing analysis. I can help you with:</p>
                            <ul>
                                <li>📊 Yield trend analysis and predictions</li>
                                <li>🔧 Equipment performance optimization</li>
                                <li>🔍 Root cause analysis for defects</li>
                                <li>📈 Process parameter correlations</li>
                                <li>⚡ Real-time anomaly detection</li>
                                <li>📋 SOP and best practice recommendations</li>
                            </ul>
                            <p>Try asking me something like "What's causing the yield drop in Lot W2024-001?" or "How can we optimize Stepper-01 performance?"</p>
                        </div>
                        <div class="message-time">Just now</div>
                    </div>
                </div>
            </div>

            <!-- Suggested Questions -->
            <div class="suggested-questions" id="suggestedQuestions">
                <div class="suggestions-header">💡 Suggested Questions</div>
                <div class="suggestions-grid">
                    <button class="suggestion-btn" onclick="askQuestion('What is the current yield trend for the past 24 hours?')">
                        📈 Current yield trend analysis
                    </button>
                    <button class="suggestion-btn" onclick="askQuestion('Which equipment needs attention based on recent performance?')">
                        🔧 Equipment performance review
                    </button>
                    <button class="suggestion-btn" onclick="askQuestion('Analyze the root cause of defects in Lot W2024-001')">
                        🔍 Root cause analysis for defects
                    </button>
                    <button class="suggestion-btn" onclick="askQuestion('What process parameters correlate with yield loss?')">
                        📊 Parameter correlation analysis
                    </button>
                    <button class="suggestion-btn" onclick="askQuestion('Predict yield for the next 8 hours')">
                        🔮 Yield prediction forecast
                    </button>
                    <button class="suggestion-btn" onclick="askQuestion('Show me the data lineage for wafer test results')">
                        🗂️ Data lineage tracing
                    </button>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea 
                        id="chatInput" 
                        class="chat-input" 
                        placeholder="Ask me anything about your semiconductor manufacturing data..."
                        rows="1"
                    ></textarea>
                    <div class="input-actions">
                        <button class="action-btn" onclick="attachFile()" title="Attach File">📎</button>
                        <button class="action-btn" onclick="startVoiceInput()" title="Voice Input">🎤</button>
                        <button class="send-btn" onclick="sendMessage()" title="Send Message">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22,2 15,22 11,13 2,9"></polygon>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="input-hints">
                    <span class="hint">💡 Tip: You can ask about specific lots, equipment, or time periods</span>
                    <span class="hint">🔍 Try: "Compare yield between Stepper-01 and Stepper-02"</span>
                </div>
            </div>
        </div>

        <!-- Context Panel -->
        <div class="context-panel">
            <div class="panel-header">
                <h3>Context & Data Sources</h3>
                <button class="panel-toggle" onclick="togglePanel()">⚙️</button>
            </div>
            
            <div class="context-section">
                <h4>🗄️ Active Data Sources</h4>
                <div class="data-sources">
                    <div class="data-source active">
                        <div class="source-icon">📊</div>
                        <div class="source-info">
                            <div class="source-name">MES Database</div>
                            <div class="source-status">Connected • 1.2M records</div>
                        </div>
                    </div>
                    <div class="data-source active">
                        <div class="source-icon">🔬</div>
                        <div class="source-info">
                            <div class="source-name">WAT System</div>
                            <div class="source-status">Connected • 450K tests</div>
                        </div>
                    </div>
                    <div class="data-source active">
                        <div class="source-icon">📡</div>
                        <div class="source-info">
                            <div class="source-name">FDC Sensors</div>
                            <div class="source-status">Streaming • Real-time</div>
                        </div>
                    </div>
                    <div class="data-source">
                        <div class="source-icon">📚</div>
                        <div class="source-info">
                            <div class="source-name">Knowledge Base</div>
                            <div class="source-status">Available • 2.5K SOPs</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="context-section">
                <h4>🎯 Current Context</h4>
                <div class="context-items">
                    <div class="context-item">
                        <span class="context-label">Time Range:</span>
                        <span class="context-value">Last 24 hours</span>
                    </div>
                    <div class="context-item">
                        <span class="context-label">Focus Area:</span>
                        <span class="context-value">Fab 1 - Line A</span>
                    </div>
                    <div class="context-item">
                        <span class="context-label">Active Lots:</span>
                        <span class="context-value">W2024-001 to W2024-015</span>
                    </div>
                    <div class="context-item">
                        <span class="context-label">Equipment:</span>
                        <span class="context-value">All monitored tools</span>
                    </div>
                </div>
            </div>

            <div class="context-section">
                <h4>🧠 AI Capabilities</h4>
                <div class="capabilities">
                    <div class="capability">
                        <div class="capability-icon">🔍</div>
                        <div class="capability-text">Multi-modal Analysis</div>
                    </div>
                    <div class="capability">
                        <div class="capability-icon">🔗</div>
                        <div class="capability-text">Causal Inference</div>
                    </div>
                    <div class="capability">
                        <div class="capability-icon">📈</div>
                        <div class="capability-text">Predictive Modeling</div>
                    </div>
                    <div class="capability">
                        <div class="capability-icon">💡</div>
                        <div class="capability-text">Optimization Suggestions</div>
                    </div>
                </div>
            </div>

            <div class="context-section">
                <h4>📊 Quick Stats</h4>
                <div class="quick-stats">
                    <div class="stat">
                        <div class="stat-value">94.2%</div>
                        <div class="stat-label">Current Yield</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">1,247</div>
                        <div class="stat-label">Wafers Today</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Active Alerts</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">87.5%</div>
                        <div class="stat-label">Equipment OEE</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/ai-chat.js"></script>
</body>
</html>

